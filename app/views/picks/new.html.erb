<div class="alert alert-primary" role="alert">
  You can submit and change your picks up until the start of each series.
</div>
<%= form_with model: Pick.new do |form| %>
  <% @matchups.each do |matchup| %>
    <% pick = @picks[matchup.id] %>
    <h3><%= "#{matchup.favorite.full_name} vs. #{matchup.underdog.full_name}" %></h3>
    <p>Starts <%= matchup.starts_at_pretty %></p>
    <p>
      <ul class="list-unstyled">
        <%= form.fields_for :matchup, index: matchup.id do |matchup_form| %>
          <% matchup.possible_results.each do |team, games, code| %>
            <li class="form-check">
              <% checked = pick&.num_games == games && pick&.winner == team %>
              <%= matchup_form.radio_button :result, code, checked: checked, class: "form-check-input" %>
              <%= matchup_form.label :"result_#{code}", "#{team.name} in #{games}", class: "form-check-label" %>
            </li>
          <% end %>
        <% end %>
      </ul>
    </p>
  <% end %>
  <br>
  <div class="mb-5">
    <%= form.submit "Submit Picks", class: "btn btn-primary" %>
  </div>
<% end %>
